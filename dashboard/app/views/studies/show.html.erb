<div class="container">
<p style="color: green"><%= notice %></p>



<div class="row">
    <div class="col-10"></div>

    <div class="col">
  <%= link_to '', new_study_graph_path(@study), class: "fa-solid fa-chart-line" %>

  <%= link_to "", edit_study_path(@study), class: "fa-solid fa-sliders" %> |
  <%= link_to "", studies_path, class: "fa-solid fa-arrow-left" %>

  <%= link_to "", @study, data: { turbo_method: :delete }, class: "fa-solid fa-circle-xmark" %>

  </div>


</div>

<div class="row mt-5">
  <div class="col-12 ">
<h1><%= @study.name %></h1>

<p><%= @study.description %></p>
  </div>


</div>






<% if @study.graphs.any? %>
  
    <% @study.graphs.each do |graph| %>
      <div class="row mt-5">

        <div class="col d-flex justify-content-center">
     <h1><%= graph.name %></h1>

        </div>

      </div>





      <div class="row">
     

          <div class="col-12">

<%= 

coords = JSON.parse(graph.coords)
@foo = Vega.lite
  .data(coords)
  .mark(type: "bar", tooltip: true)
  .encoding(
    x: {field: "x", type: "nominal"},
    y: {field: "y", type: "quantitative"}
  )


%>
        </div>
      </div>

      <div class="row">
        <div class="col-4">
        <p><%= graph.name %></p>
          <%= graph.dependent_var%>
                  <h2><%= graph.name %></h2>
          <p><%= graph.location %> </p>
          <p><%= graph.dependent_var %></p>

          <%= link_to '', edit_study_graph_path(@study, graph), class: "fa-solid fa-sliders" %>
       
        <%= link_to "", study_graph_path(@study, graph), data: { turbo_method: :delete }, class: "fa-solid fa-circle-xmark", confirm: "Are you sure?" %>


        </div>

        <div class="col-8">
        <p><%= graph.description %></p>
        </div>

      </div>
    <% end %>
 
<% else %>
  <p>No graphs found.</p>
<% end %>


</div>



