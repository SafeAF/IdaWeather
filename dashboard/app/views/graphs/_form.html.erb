<div class="container">
<%= form_with(model: graph, url: [@study, graph], class: "needs-validation", novalidate: true) do |form| %>


  <% if graph.errors.any? %>
    <div class="alert alert-danger">
      <h2><%= pluralize(graph.errors.count, "error") %> prohibited this graph from being saved:</h2>

      <ul>
        <% graph.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>


  <div class="mb-3">
    <%= form.label :name, class: "form-label" %>
    <%= form.text_field :name, class: "form-control", required: true %>
    <div class="invalid-feedback">
      Please provide a name for the graph.
    </div>
  </div>

  <div class="mb-3">
    <%= form.label :description, class: "form-label" %>
    <%= form.text_area :description, class: "form-control" %>
  </div>



<div id="year-fields">
  <div class="row mb-3">
      <div class="col-md-6">
      <%= form.label :start_year, class: "form-label" %>
      <%= form.number_field :start_year, class: "form-control" %>
    </div>
      <div class="col-md-6">
      <%= form.label :end_year, class: "form-label" %>
      <%= form.number_field :end_year, class: "form-control" %>
    </div>
  </div>
</div>


  <div class="mb-3">
    <%= form.label :year, class: "form-label" %>
    <%= form.number_field :year, class: "form-control" %>
  </div>

  <div class="mb-3 form-check">
    <%= form.check_box :range, class: "form-check-input" %>
    <%= form.label :range, id: "range-checkbox", class: "form-check-label" %>
  </div>

  <div class="row mb-3">
    <div class="col">
      <%= form.label :month, class: "form-label" %>
      <%= form.number_field :month, class: "form-control" %>
    </div>
    <div class="col">
      <%= form.label :day, class: "form-label" %>
      <%= form.number_field :day, class: "form-control" %>
    </div>
    <div class="col">
      <%= form.label :hour, class: "form-label" %>
      <%= form.number_field :hour, class: "form-control" %>
    </div>
  </div>



  <div>
    <%= form.label :dependent_var, style: "display: block" %>
    <%= form.select :dependent_var, [ "temperature",                                                         
 "dewpoint_temperature",                                                
 "soil_temperature_level_1",                                            
 "soil_temperature_level_2",                                            
 "soil_temperature_level_3",                                            
 "soil_temperature_level_4",
 "surface_thermal_radiation",
 "surface_solar_radiation",
 "direct_normal_solar_radiation",
 "surface_diffuse_solar_radiation",
 "relative_humidity",
 "surface_pressure",
 "mean_sea_level_pressure",
 "total_cloud_cover",
 "total_precipitation",
 "snowfall",
 "snow_depth",
 "snow_density",
 "volumetric_soil_water_layer_1",
 "volumetric_soil_water_layer_2",
 "volumetric_soil_water_layer_3",
 "volumetric_soil_water_layer_4",
 "wind_speed",
 "wind_direction",
 "10m_wind_gust",
 "100m_wind_speed",
 "100m_wind_direction"]
         %>
  </div>

<div class="row">
<div class="col-3">
  <%= form.label :function, class: "form-label" %>
  <%= form.select :function, ["mean", "max", "min"], class: "form-select" %>
</div>

<div class="col-3">
  <%= form.label :chart_type, class: "form-label" %>
  <%= form.select :chart_type, ["line", "scatter", "bar", "area", "pie"], class: "form-select" %>
</div>

<div class="col-6">
  <%= form.label :category, class: "form-label" %>
  <%= form.select :category, ["Range_across_years", "Compare_one_month_across_years", "Monthly_for_one_year", "Hourly_for_one_month_in_a_single_year"], class: "form-select" %>
</div>
</div>


  <div>
    <%= form.label :location, style: "display: block" %>
    <%= form.select :location, ["Buhl",                    
 "Burley",                  
 "Caldwell",                
 "Cour d'Alene",            
 "Emmett",                  
 "Gannet",
 "Gooding",
 "Grangeville",
 "Idaho Falls",
 "Ketchum",
 "Minidoka",
 "Moscow",
 "Mountain Home",
 "Mountains West of Jackpot",
 "Murtaugh",
 "Oakley",
 "Payette",
 "Pike Mountain",
 "Pocatello",
 "Salmon",
 "Twin Falls"] 
 %>
  </div>




  <%= form.check_box :has_optional_field, data: { action: "change->example#toggleOptionalField" } %>
  <%= form.label :has_optional_field, "Has Optional Field" %>

  <div>
    <%= form.submit "Submit", class: "btn btn-primary mt-3"%>
  </div>
<% end %>
</div>


<script>
  const yearFields = document.getElementById('year-fields');
  console.log("BAR")

  document.getElementById('range-checkbox').addEventListener('change', (event) => {
    yearFields.style.display = event.target.checked ? 'block' : 'none';
    console.log("FOO");
  });
</script>